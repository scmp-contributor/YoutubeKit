<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale={viewport-initial-scale}, user-scalable=no">
    <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; background-color: #000000; }
    </style>
</head>
<body>
    <iframe id="player" width="100%" height="100%"
      src="https://www.youtube.com/smart_embed?{iframe-src-query-string}"
      frameborder="0"
      allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; fullscreen"
      allowfullscreen>
    </iframe>
    <div id="explain"></div>
    <script src="https://www.youtube.com/iframe_api" onerror="webkit.messageHandlers.onYouTubeIframeAPIFailedToLoad.postMessage('')"></script>
    <script>
      var player;
      var time;
      YT.ready(function() {
        player = new YT.Player('player', {player-options});
        webkit.messageHandlers.onYouTubeIframeAPIReady.postMessage('');
        function updateTime() {
          var state = player.getPlayerState();
          if (state == YT.PlayerState.PLAYING) {
            time = player.getCurrentTime();
            webkit.messageHandlers.onUpdateCurrentTime.postMessage(time);
          }
        }
        window.setInterval(updateTime, 500);
      });

    // Listen for event fired when no recommended videos are found
    window.addEventListener("message", function(event) {
      if (event.origin == 'https://www.youtube.com' &&
          event.data == 'youtube-smart-embed-close') {
        webkit.messageHandlers.onVideosNotFoundForSmartEmbeds.postMessage(time);
      }
    }, false);

    function onReady(event) {
      webkit.messageHandlers.onReady.postMessage('');
    }
    function onStateChange(event) {
      webkit.messageHandlers.onStateChange.postMessage(event.data);
    }
    function onPlaybackQualityChange(event) {
      webkit.messageHandlers.onPlaybackQualityChange.postMessage(event.data);
    }
    function onPlaybackRateChange(event) {
      webkit.messageHandlers.onPlaybackRateChange.postMessage(event.data);
    }
    function onPlayerError(event) {
      webkit.messageHandlers.onError.postMessage(event.data);
    }
    function onApiChange(event) {
      webkit.messageHandlers.onApiChange.postMessage(event.data);
    }
    </script>
</body>
</html>
